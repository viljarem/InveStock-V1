name: ğŸ”” Hold Streamlit Cloud VÃ¥ken

on:
  schedule:
    # Ping hver 25. minutt (fÃ¸r 30 min timeout)
    - cron: '*/25 * * * *'
  
  workflow_dispatch:  # Manuell test

jobs:
  ping-app:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ”” Ping Streamlit Cloud app
      run: |
        # Streamlit Cloud URL for InveStock V1
        APP_URL="https://investock-v1.streamlit.app"
        
        echo "ğŸ”” Pinger Streamlit Cloud app..."
        echo "URL: $APP_URL"
        
        # Enkel HTTP GET request for Ã¥ holde appen vÃ¥ken
        response=$(curl -s -o /dev/null -w "%{http_code}" --connect-timeout 30 "$APP_URL" || echo "000")
        
        if [ "$response" = "200" ]; then
          echo "âœ… App er vÃ¥ken! (HTTP $response)"
        elif [ "$response" = "000" ]; then
          echo "âš ï¸  Timeout eller connection error"
        else
          echo "âš ï¸  App response: HTTP $response"
        fi
        
        echo "ğŸ• Ping fullfÃ¸rt: $(date)"
    
    - name: ğŸ“Š Status oppsummering
      run: |
        echo "================================================="
        echo "ğŸ”” STREAMLIT CLOUD PING STATUS"
        echo "================================================="
        echo "Tidspunkt: $(TZ='Europe/Oslo' date '+%Y-%m-%d %H:%M')"
        echo "FormÃ¥l: Holde Streamlit Cloud app vÃ¥ken"
        echo "Neste ping: Om 25 minutter"
        echo "================================================="